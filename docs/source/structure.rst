Структура приложения
==========

Корневой каталог
-------------------------

::
    
    .
    ├── _upload
    ├── bank
    ├── basket
    ├── block
    ├── cgi-bin
    ├── class
    ├── i
    ├── images
    ├── js
    ├── lib
    ├── manage
    ├── nfiles
    ├── pay
    ├── payeer
    ├── registration
    ├── s_class
    ├── siteclass
    ├── tmpl
    ├── txt
    ├── typepage
    ├── user
    ├── xml
    ├── .htaccess
    ├── 404.html
    ├── _ch_tmpl.html
    ├── auto.p
    ├── config.p
    ├── config_pay.p
    ├── config_payeer.p
    ├── import.html
    ├── index.html
    ├── login.html
    ├── logout.html
    └── redirect.html

_upload
~~~~~~~~~~~~~~~~~~

Папка предназначена для импорт каталога например из 1С:Предприятие.
Более подробно описано в `Онлайн-помощнике. Работа с каталогами`_.

.. _`Онлайн-помощнике. Работа с каталогами`: http://alma-help.ru/rabota-s-katalogami/

bank
~~~~~~~~~~~~~~~~~~

Хранятся файлы сайта загруженные через `Банк файлов`_.

.. _`Банк файлов`: http://alma-help.ru/bank-faylov/

basket
~~~~~~~~~~~~~~~~~~

Папка содержит файлы для работы корзины на сайте.

block
~~~~~~~~~~~~~~~~~~

В данную папку загружаются файлы через старые блоки такими как `Слайд-шоу`, `Фотогалерея`. При разработке нового блока необходимо загружать файлы в папку ``images``.

cgi-bin
~~~~~~~~~~~~~~~~~~

Папка содержит CGI скрипты.

class
~~~~~~~~~~~~~~~~~~

Папка содержит основные классы сайта. Классы блоков лежат в папке ``block``.

i
~~~~~~~~~~~~~~~~~~

Папка содержит основные стили, скрипты, иконки, изображения сайта

images
~~~~~~~~~~~~~~~~~~

Хранятся изображения загруженные блоками. 

js
~~~~~~~~~~~~~~~~~~

Папка содержит скрипты, которые часто подключаются при разработке сайта.

lib
~~~~~~~~~~~~~~~~~~

Папка содержит библиотеки, например `colorpicker`, которые часто подключаются при разработке сайта.

manage
~~~~~~~~~~~~~~~~~~

Папка содержит код административной панели ALMA.CMS.

nfiles
~~~~~~~~~~~~~~~~~~

Хранятся файлы загруженные блоками. 

pay
~~~~~~~~~~~~~~~~~~

Папка содержит файлы для обработки ответов от ROBOKASSA. 

payeer
~~~~~~~~~~~~~~~~~~

Папка содержит файлы для работы платежной системы ROBOKASSA. 

registration
~~~~~~~~~~~~~~~~~~

Папка содержит файлы для регистрации пользователя.

s_class
~~~~~~~~~~~~~~~~~~

Папка содержит класс с новой автоизацией пользователя.

siteclass
~~~~~~~~~~~~~~~~~~

Папка содержит устаревшие классы для работы с каталогом, при разработке сайта необходимо использоавть папку ``\class\block\bcatalog``.

tmpl
~~~~~~~~~~~~~~~~~~

Папка содержит все шаблоны сайта, по умолчанию используется ``main``. Для переключение шаблонов в административной панели есть раздел `Шаблоны`_.

.. _`Шаблоны`: http://alma-help.ru/shablony/

txt
~~~~~~~~~~~~~~~~~~

Папка для хранения текстовых файлов.

typepage
~~~~~~~~~~~~~~~~~~

Системные страницы сайта, например поиск по сайту.

user
~~~~~~~~~~~~~~~~~~

Папка содержит файлы для работы с пользователем.

xml
~~~~~~~~~~~~~~~~~~

Папка для хранения xml файлов. Так же в данной папке генерируется файл для `Яндекс.Маркет`_.

.. _`Яндекс.Маркет`: http://alma-help.ru/yandeks-market/

.htaccess
~~~~~~~~~~~~~~~~~~

Файл дополнительной конфигурации веб-сервера Apache. Данный файл генерируется **автоматически**. Для того чтобы внести правило, необходимо отредактировать функцию ``@make_rewrite[]`` в ``\manage\auto.p``.


404.html
~~~~~~~~~~~~~~~~~~

Файл для отображение 404 страницы.

config.p
~~~~~~~~~~~~~~~~~~

Конфигурационный файл для работы с Mysql.

config_pay.p
~~~~~~~~~~~~~~~~~~

Конфигурационный файл для работы с платежной системой ROBOKASSA.

config_payeer.p
~~~~~~~~~~~~~~~~~~

Конфигурационный файл в котором содержится информация о магазине для работы с ROBOKASSA.

import.html
~~~~~~~~~~~~~~~~~~

Файл для запуска импорта.

index.html
~~~~~~~~~~~~~~~~~~

Точка входа.

login.html
~~~~~~~~~~~~~~~~~~

Файл для авторизации пользователя.

logout.html
~~~~~~~~~~~~~~~~~~

Файл для выхода пользователя.

redirect.html
~~~~~~~~~~~~~~~~~~

Файл для редиректов. Пример использования: ``http://site.ru/redirect.html?link= http://new-site.ru/``.
