Прохождение запроса
==========

Начало
-------------------------

Входная точка для большинства запросов к вашему сайту это файл ``index.html``.
Запросы направляются в этот файл настройками прописанными в файле ``.htaccess``.

Ядро
-------------------------

Центральное место всего сайта является файл ``auto.p``. Данный файл содержит большинство функций используемых при разработке сайта. Этот файл автоматически подключается ко всем файлам сайта. Первым делом из ``auto.p`` срабатывает функция ``@main[]``. Далее в функции ``@body[]`` подключается шаблон, по умолчанию - ``\tmpl\main\index.html``.

Шаблон
-------------------------

Шаблон сайта содержит верстку и вызов функций. Одна из важных вызываемых в шаблоне функций - ``^text[]``. Данная функция выводить содержимое основной части заполненное в административной панели. Сам вывод блоков происходит в файле ``\class\text_extended.p``.

Вывод блоков
-------------------------
Как уже говорилось выше блоки админстративной панели выводятся в файле ``\class\text_extended.p``.

.. warning:: В данном файле не рекомендуется что либо менять, кроме как подключения новых блоков.

Рассмотрим пример подключение нового блока ``bnewBlock``.

::

	#brick
	^use[/class/block/bcatalog.p]
	...
	^use[/class/block/bnewBlock.p]

	$brick[
	   $.bcatalog[$bcatalog:CLASS]
	   ...
	   $.bnewBlock[$bnewBlock:CLASS]
	]
	
Сами блоки располагаются ``\class\block\bnewBlock.p``, где bnewBlock - название блока. В данном блоке должна быть определена одна функция ``@show[iid]``. Так как именно данную функцию вызывает класс ``\class\text_extended.p``.